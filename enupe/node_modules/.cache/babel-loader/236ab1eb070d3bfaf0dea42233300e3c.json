{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\(Unknown)\\\\Desktop\\\\Node\\\\ENUPE\\\\frontend\\\\enupe\\\\enupe\\\\src\\\\components\\\\login\\\\index.js\";\nimport React from 'react';\nimport Axios from '../../api.js';\nimport AntiSpam from '../../classes/AntiSpam.js';\nimport VerifyExistence from '../../classes/VerifyExistence.js';\nimport { Link } from 'react-router-dom';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super();\n\n    this.submitform = async e => {\n      e.preventDefault();\n      const r = /^(?=.*\\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/; //Regexp que determina se a string tem 8+ caracteres entre letras e numeros\n\n      if (!r.exec(this.state.password)) {\n        this.setState({\n          incorrect: [false, true]\n        });\n        return;\n      }\n\n      ;\n      const {\n        data\n      } = await Axios.post(Axios.defaults.baseUrl + \"/login\", {\n        user: this.state.email,\n        password: this.state.password\n      });\n\n      if (data.correct !== false) {\n        localStorage.setItem('authenticated', data.correct); //window.location.reload(false); //Precisa mesmo disso, eu tentei de todas as formas evitar\n      } else if (data.incorrect[0]) {\n        this.setState({\n          incorrect: [true, false]\n        });\n      } else if (data.incorrect[1]) {\n        this.setState({\n          incorrect: [false, true]\n        });\n      }\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      incorrect: [false, false]\n    };\n    this.emailHandler = new AntiSpam(() => {\n      new VerifyExistence(data => this.setState({\n        incorrect: [!data.exists[0], false]\n      })).parser(this.state.email);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"flex flex-col w-full bg-white shadow-md rounded p-8\",\n      onSubmit: this.submitform,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-col mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-gray-700 text-md font-bold mb-2\",\n      htmlFor: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 21\n      }\n    }, \"Nome ou Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.email,\n      onChange: e => {\n        this.setState({\n          email: e.target.value\n        });\n        this.emailHandler.restart(e);\n      },\n      className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-gray-600\" + (this.state.incorrect[0] ? \" border-red-600\" : \"\"),\n      id: \"email\",\n      type: \"text\",\n      required: true,\n      placeholder: \"__\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-red-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 21\n      }\n    }, this.state.incorrect[0] ? \"Nome ou email incorretos.\" : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-gray-700 text-md font-bold mb-2\",\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 21\n      }\n    }, \"Senha\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.password,\n      onChange: e => {\n        this.setState({\n          password: e.target.value,\n          incorrect: [false, false]\n        });\n      },\n      className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:border-gray-600\" + (this.state.incorrect[1] ? \" border-red-600\" : \"\"),\n      id: \"password\",\n      type: \"password\",\n      minLength: \"8\",\n      required: true,\n      placeholder: \"_\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-red-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 21\n      }\n    }, this.state.incorrect[1] ? \"Senha incorreta.\" : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center justify-between text-sm sm:text-base\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Entrar\",\n      className: \"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:border-gray-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-gray-600 ml-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 21\n      }\n    }, \"N\\xE3o tem uma conta? \", /*#__PURE__*/React.createElement(Link, {\n      className: \"text-blue-500 hover:underline shadow rounded md:shadow-none px-2 md:px-0\",\n      to: \"/cadastro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 77\n      }\n    }, \"Cadastre-se!\"))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/(Unknown)/Desktop/Node/ENUPE/frontend/enupe/enupe/src/components/login/index.js"],"names":["React","Axios","AntiSpam","VerifyExistence","Link","Login","Component","constructor","props","submitform","e","preventDefault","r","exec","state","password","setState","incorrect","data","post","defaults","baseUrl","user","email","correct","localStorage","setItem","emailHandler","exists","parser","render","target","value","restart"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Axios from '../../api.js';\r\nimport AntiSpam from '../../classes/AntiSpam.js';\r\nimport VerifyExistence from '../../classes/VerifyExistence.js';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super();\r\n        this.state = {email:\"\",password:\"\",incorrect:[false,false]};\r\n        this.emailHandler = new AntiSpam(() => {\r\n            new VerifyExistence((data) => this.setState(\r\n                { incorrect: [!data.exists[0], false] }\r\n            )).parser(this.state.email); \r\n        });\r\n    }\r\n    render(){\r\n        return (\r\n            <form className=\"flex flex-col w-full bg-white shadow-md rounded p-8\" onSubmit={this.submitform}>\r\n                <div className=\"flex flex-col mb-4\">\r\n                    <label className=\"text-gray-700 text-md font-bold mb-2\" htmlFor=\"email\">Nome ou Email</label>\r\n                    <input value={this.state.email} onChange={(e) => { this.setState({ email: e.target.value }); this.emailHandler.restart(e)}} className={\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:border-gray-600\" + (this.state.incorrect[0] ? \" border-red-600\" : \"\")} id=\"email\" type=\"text\" required placeholder=\"__\" />\r\n                    <span className=\"text-red-600\">{(this.state.incorrect[0] ? \"Nome ou email incorretos.\" : \"\")}</span>\r\n                </div>\r\n                <div className=\"flex flex-col\">\r\n                    <label className=\"text-gray-700 text-md font-bold mb-2\" htmlFor=\"password\">Senha</label>\r\n                    <input value={this.state.password} onChange={(e) => { this.setState({ password: e.target.value, incorrect: [false, false] }); }} className={\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:border-gray-600\" + (this.state.incorrect[1] ? \" border-red-600\" : \"\")} id=\"password\" type=\"password\" minLength=\"8\" required placeholder=\"_\" />\r\n                    <span className=\"text-red-600\">{(this.state.incorrect[1] ? \"Senha incorreta.\" : \"\")}</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between text-sm sm:text-base\">\r\n                    <input type=\"submit\" value=\"Entrar\" className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:border-gray-600\" />\r\n                    <span className=\"text-gray-600 ml-4\">NÃ£o tem uma conta? <Link className=\"text-blue-500 hover:underline shadow rounded md:shadow-none px-2 md:px-0\" to=\"/cadastro\">Cadastre-se!</Link></span>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n    submitform = async (e)=>{\r\n        e.preventDefault();\r\n        const r = /^(?=.*\\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$/; //Regexp que determina se a string tem 8+ caracteres entre letras e numeros\r\n        if (!r.exec(this.state.password)) { this.setState({ incorrect: [false, true] }); return;};\r\n        \r\n        const { data } = await Axios.post(Axios.defaults.baseUrl+\"/login\", { user:this.state.email, password:this.state.password});\r\n\r\n        if(data.correct !== false){\r\n            localStorage.setItem('authenticated', data.correct);\r\n            //window.location.reload(false); //Precisa mesmo disso, eu tentei de todas as formas evitar\r\n        }else\r\n        if (data.incorrect[0]) { \r\n            this.setState({ incorrect:[true,false]});\r\n        }else\r\n        if (data.incorrect[1]) { this.setState({ incorrect: [false, true]})}\r\n    }\r\n}\r\n\r\nexport default Login;\r\n\r\n"]},"metadata":{},"sourceType":"module"}